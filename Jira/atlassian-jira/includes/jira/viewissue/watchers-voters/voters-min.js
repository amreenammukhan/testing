define("jira/viewissue/watchers-voters/voters",["require"],(function(e){"use strict";var i=e("jira/viewissue/watchers-voters/entities/voters-user-collection"),t=e("jira/viewissue/watchers-voters/views/voters-view"),n=e("jira/issue"),r=e("jira/ajs/layer/inline-layer"),o=e("aui/inline-dialog"),s=e("jira/util/key-code"),a=e("jquery"),c=o("#view-voter-list","voters",(function(e,r,o){var s=a("#vote-toggle").next(".icon"),l=new i(n.getIssueKey());e.parent(".aui-inline-dialog").attr({"aria-labelledby":"voters-modal-label","aria-modal":!1,role:"dialog"});s.addClass("loading");new t({collection:l}).render().done((function(i){e.html(i);e.find(".cancel").click((function(e){c.hide();r.focus();e.preventDefault()}));s.removeClass("loading");o();setTimeout((function(){var i=e.find(":focusable");i.focus();e.on("keydown",(function(e){if("Tab"===e.key&&(e.shiftKey&&document.activeElement===i[0]||document.activeElement===i[i.length-1])){e.preventDefault();return!1}if("Escape"===e.key){e.preventDefault();r.focus();c.hide();return!1}}))}),100)}));l.on("errorOccurred",(function(){c.hide();a("#view-voter-list").focus()}))}),{width:240,useLiveEvents:!0,items:"#view-voters-list",preHideCallback:function(){return!r.current}});a(document).bind("keydown",(function(e){if(e.keyCode===s.ESCAPE&&o.current!==c&&c.is(":visible")){o.current&&o.current.hide();c.hide();a("#view-voter-list").focus()}}));a(document).click((function(e){var i=o.current;if(i&&"voters"===i.id&&!a(e.target).closest("#inline-dialog-voters").length){i.hide();a("#view-voter-list").focus()}}))}));